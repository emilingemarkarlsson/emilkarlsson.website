var Prideify=function(t,i){if(void 0===t&&(t="[data-pride]"),void 0===i&&(i={}),this instanceof Prideify)this.options=i,this.stripes=this.options.customStripes||this.defaultStripes,this.options.renderedClass=this.options.renderedClass||"prideified",this.prideifyImage(t);else{var e;if(window.jQuery&&t.jquery&&(e=jQuery.makeArray(t)),"string"==typeof t){var s=document.querySelectorAll(t);e=Array.prototype.slice.call(s)}[].concat(e||t).forEach(function(t){new Prideify(t,i)})}};Prideify.prototype.prideifyImage=function(t){if(!t.classList.contains(this.options.renderedClass)){var i=new Image;switch(i.crossOrigin="anonymous",i.src=t.src,typeof this.options.crossOriginProxy){case"string":i.src=this.options.crossOriginProxy+i.src;case"boolean":this.options.crossOriginProxy&&(i.src="http://crossorigin.me/"+i.src)}i.onload=function(){t.src=this.render(i),t.classList.add(this.options.renderedClass),i=null,"function"==typeof this.options.afterRender&&this.options.afterRender(t)}.bind(this)}},Prideify.prototype.render=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height),this.addRainbow(t);var i=this.canvas.toDataURL();return this.removeCanvas(),i},Prideify.prototype.defaultStripes=[[255,62,24],[252,154,0],[255,216,0],[57,234,124],[11,178,255],[152,90,255]],Prideify.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)},Prideify.prototype.addRainbow=function(t){for(var i=0;i<this.stripes.length;i++)this.addStripe(t,i)},Prideify.prototype.addStripe=function(t,i){var e=this._stripeThickness(t),s=i*e,r=this.stripes[i].join(", ");this.context.fillStyle="rgba("+r+", 0.5)";var n=this._rectangle(s,e,this._stripeLength(t));this.context.fillRect.apply(this.context,n)},Prideify.prototype._stripeLength=function(t){return this.options.vertical?t.height:t.width},Prideify.prototype._stripeThickness=function(t){return(this.options.vertical?t.width:t.height)/this.stripes.length},Prideify.prototype._rectangle=function(t,i,e){return this.options.vertical?[t,0,i,e]:[0,t,e,i]},window.jQuery&&(jQuery.fn.prideify=function(t){Prideify(this,t)});