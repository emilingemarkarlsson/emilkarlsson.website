<!doctype html>
<html>
  <head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>
    <meta name='description' content="When working in git, you most commonly trace a repository&#39;s history using commits&#39; SHA-1 hashes. To revert to a previous commit, you might write something like this:">
    

    <title>Working with dates in Git - Alex Peattie</title>

    <link href='//fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32-18545059.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192-62275dc0.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16-13aa2390.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab-b8c45f01.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ff0000">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ff0000">

    <link href="/assets/css/all-a7a0038a.css" rel="stylesheet" />
    <script src="/assets/js/all-a1da6af5.js"></script>
  </head>

  <body class='blog blog_working-with-dates-in-git blog_working-with-dates-in-git_index'>
    <header>
  <nav class='MainMenu'>
    <a href='/' class='Logo'>
      <span>emil</span>karlsson
    </a>

    <a class='NavBtn NavBtn--mobileOnly' data-toggle-modal-menu>Menu</a>

    <section class='MainMenu-links'>
      <a href='/' class='NavBtn' id='NavBtnAbout'>About Me</a>
      <a href='/projects' class='NavBtn' id='NavBtnProjects'>Projects</a>
    <!-- <a href='/talks' class='NavBtn' id='NavBtnTalks'>Talks</a> -->
    <!-- <a href='/blog' class='NavBtn' id='NavBtnBlog'>Blog</a> -->

      <a class='NavBtn NavBtn--close' data-toggle-modal-menu>✕</a>
    </nav>
  </nav>

  
</header>


    <main>
        <article class='ContentBody'>
    <h1>Working with dates in Git</h1>
    <h2 class='PostMeta'>
      <time datetime="2011-03-11" pubdate="true">11th March 2011</time> – 
      <a href='#comments' data-disqus-url='http://alexpeattie.com/blog/working-with-dates-in-git/'>comments</a>
    </h2>
    <p>When working in <a href="http://git-scm.com/">git</a>, you most commonly trace a repository's history using commits' SHA-1 hashes. To revert to a previous commit, you might write something like this:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git revert 883c3dc85a49d98da649
</pre></td></tr></tbody></table>
</div>

<p>The problem is, we tend not to think in hashes. Rather, we wonder what changes we made <em>yesterday</em>, or remember that a now-broken piece of code worked perfectly <em>a week ago</em>. Although we can use <code>git log</code> to track down the commit we want, there has to be an easier way. Luckily git understands our human quirks, and offers us just that.</p>

<h2 id="understanding-dates-in-git-author-date-vs-committer-date--approxidate">Understanding dates in Git: author date vs. committer date &amp; 'approxidate'</h2>

<p>There are two kinds of timestamp in git: a <code>GIT_AUTHOR_DATE</code> and a <code>GIT_COMMITTER_DATE</code>. Although in most cases they both store the same value, they serve slightly different purposes. As the <a href="http://progit.org/book/ch2-3.html">Pro Git Book</a> explains:</p>

<blockquote>
  <p>The author is the person who originally wrote the work, whereas the committer is the person who last applied the work.</p>
</blockquote>

<p>So if, for instance, you send in a patch to a project, the author date will be when you made the original commit but the committer date will be when the patch was applied. Another common scenario is rebasing: rebasing will alter the commit date, but not the author date.</p>

<p>This distinction is worth mentioning because of an inconsistency in git that <a href="http://web.archive.org/web/20130508191420/http://cworth.org/hgbook-git/tour/">Carl Worth points out</a>:</p>

<blockquote>
  <p>By default, <code>git log</code> displays author dates as "Date" but then uses commit dates when given a <code>--since</code> option. That seems like broken defaults to me.</p>
</blockquote>

<p>In other words, all the methods listed below rely on the committer date, even though you're used to seeing the author date. As mentioned, most of the time they'll be the same, but to see committer dates in the log just use:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git log --format=fuller
</pre></td></tr></tbody></table>
</div>

<h4 id="date-parsing-with-approxidate">Date parsing with 'approxidate'</h4>

<p>Git employs a kind of date parsing which will be familiar to any rubyists who've used <a href="http://chronic.rubyforge.org/">Chronic</a>. The parser, called 'approxidate' is very flexible, and allows both fixed dates in any format you can dream up ("10-11-1998", "Fri Jun 4 15:46:55 2010 +0200", "9/9/83") and relative dates ("today", "1 month 2 days ago", "six minutes ago"). You can include days of the week ("last Tuesday"), timezones ("3PM GMT") and 'named' times ("noon", "tea time").</p>

<p>Approxidate isn't really documented anywhere, but the <a href="https://github.com/git/git/blob/master/date.c">code for the parser</a> is very readable, so check it out to get an idea of the kind of formats git will accept.</p>

<h2 id="log-whatchanged---since-and---until">log, whatchanged, –since and –until</h2>

<p>OK, so how about if we want to look at all the commits made since yesterday? All we need is the <code>--since</code> option:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git log --since="yesterday"
</pre></td></tr></tbody></table>
</div>

<p>We can also use <code>--until</code> to fetch all commits up to a certain date; or of course we can use both options in tandem:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git log --since="1 week ago" --until="yesterday"
</pre></td></tr></tbody></table>
</div>

<p><code>--since</code> and <code>--until</code> can also be used with <code>whatchanged</code>.</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git whatchanged --since="1/1/2010"
</pre></td></tr></tbody></table>
</div>

<p>Worth noting: instead of <code>--until</code> and <code>--since</code> you can use <code>--before</code> and <code>--after</code>, if that's more your style.</p>

<h2 id="revert-diff-and-the--construct">revert, diff and the @ construct</h2>

<p>Not all git commands have options like <code>--since</code> and <code>--until</code>. So what if we wanted to revert back to our repo as it was a month ago? Luckily git provides us with a more generic way to reference commits using dates, with the @ construct:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git revert master@{"1 month ago"}
</pre></td></tr></tbody></table>
</div>

<p>(where master is the name of the branch you're working on).</p>

<p>This lets us do clever things, like:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git diff master@{"yesterday"} master@{"1 year 6 months ago"}
</pre></td></tr></tbody></table>
</div>

<p>which will compare the repo as it was yesterday, and as it was 1 year, 6 months ago.</p>

<h2 id="change-history-amending-and-editing-dates">Change history: amending and editing dates</h2>

<p>There might be certain situations where you want to alter the timestamps git assigns to commits. There are a couple of ways that you can do this.</p>

<h4 id="use---date">Use <code>--date</code></h4>

<p>The <code>--date</code> option allows you to specify the author date that git attaches to the commit. Here we can't use approxidate unfortunately, only fixed dates will work (YYYY.MM.DD, MM/DD/YYYY, DD.MM.YYYY, <a href="http://www.apps.ietf.org/rfc/rfc2822.html#sec-3.3">RFC 2822</a> and <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> are all valid).</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git commit --date="Wed Feb 16 14:00 2037 +0100"
</pre></td></tr></tbody></table>
</div>

<p>We can also use <code>amend</code> to change the timestamp of a previous commit:</p>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>$ git commit --amend --date="Wed Feb 16 14:00 2037 +0100"
</pre></td></tr></tbody></table>
</div>

<p>Unfortunately <code>--date</code> will only change the <code>GIT_AUTHOR_DATE</code>, not <code>GIT_COMMITTER_DATE</code>. If this is a problem, you may need to…</p>

<h4 id="manually-set-gitauthordate-and-gitcommitterdate">Manually set <code>GIT_AUTHOR_DATE</code> and <code>GIT_COMMITTER_DATE</code></h4>

<p>A word of warning - overriding <code>GIT_COMMITER_DATE</code> is somewhat <a href="http://www.tin.org/bin/man.cgi?section=1&amp;topic=CG-COMMIT">frowned upon</a>:</p>

<blockquote>
  <p>It should be never overridden, unless you know you absolutely need to override it (to ensure the commit gets the same ID as another or when migrating history around)</p>
</blockquote>

<div class="codehilite plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>$ export GIT_AUTHOR_DATE="Wed Feb 16 14:00 2037 +0100"
$ export GIT_COMMITTER_DATE="Wed Feb 16 14:00 2037 +0100"
$ git commit
</pre></td></tr></tbody></table>
</div>

<p>The code above will alter both timestamps. Amending a commit in the past is more tricky, but the <a href="https://git.wiki.kernel.org/index.php/GitFaq#How_can_I_tweak_the_date_of_a_commit_in_the_repo.3F">GitFAQ</a> provides us with a handy bash script:</p>

<div class="codehilite shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="c">#!/bin/sh</span>
<span class="c">#</span>
<span class="c"># Rewrite all branches to modify the date of one specific commit in a repo.</span>
<span class="c">#</span>
<span class="c"># Sample date format: Fri Jan 2 21:38:53 2009 -0800</span>
<span class="c"># ISO8601 and RFC822 dates will also work.</span>
<span class="c">#</span>
<span class="c"># Note: filter-branch is picky about the commit argument. As of 1.7.0.4,</span>
<span class="c"># a hex ID will work, the symbolic revision HEAD will fail silently,</span>
<span class="c"># and the usability of more exotic rev specs was not tested by the author.</span>
<span class="c">#</span>
<span class="c"># Copyright (c) Eric S. Raymond, 2010-08-01. BSD terms apply (if anybody really thinks that this</span>
<span class="c"># script is long and non-obvious enough to fall under copyright law).</span>
<span class="c">#</span>
<span class="nv">commit</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="nv">date</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
git filter-branch --env-filter <span class="se">\</span>
    <span class="s2">"if test </span><span class="se">\$</span><span class="s2">GIT_COMMIT = '</span><span class="nv">$commit</span><span class="s2">'
     then
         export GIT_AUTHOR_DATE
         export GIT_COMMITTER_DATE
         GIT_AUTHOR_DATE='</span><span class="nv">$date</span><span class="s2">'
         GIT_COMMITTER_DATE='</span><span class="nv">$date</span><span class="s2">'
     fi"</span> <span class="o">&amp;&amp;</span>
rm -fr <span class="s2">"</span><span class="k">$(</span>git rev-parse --git-dir<span class="k">)</span><span class="s2">/refs/original/"</span>
</pre></td></tr></tbody></table>
</div>

<p>Instead of setting the date explicitly, we can also use <code>GIT_COMMITTER_DATE="$GIT_AUTHOR_DATE"</code> ( source: <a href="https://gist.github.com/568898">this gist</a> ) to match up the committer date to the author date.</p>

  </article>
  
  <article class='Comments'>
  <h2 id='comments'>Comments</h2>

  <div id='disqus_thread'>
  </div>

  <script>
    var disqus_shortname = 'alexpeattie';
    var disqus_url = 'http://alexpeattie.com/blog/working-with-dates-in-git/';
    var disqus_identifier = '2011 03 11 working with dates in git';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      var s = document.createElement('script'); s.async = true; s.type = 'text/javascript';
      s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq).appendChild(s);
    })();
  </script>
</article>

    </main>

    <section class='SourceCallout'>
    <!--  <p>This site is open-source (<a href='/projects#site'>more info</a>) - here's <a href="https://github.com/alexpeattie/alexpeattie.com/blob/master/source/blog/2011-03-11-working-with-dates-in-git.html.md">the source code for this page</a></a>.</p>-->
    </section>

    <footer>
      <p>© 2018 Emil Karlsson. Questions? Email <a href='mailto:me@emilingemarkarlsson@gmail.com'>emilingemarkarlsson@gmail.com</a>
      </p>
    </footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-116235734-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
