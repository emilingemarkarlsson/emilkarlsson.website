<!doctype html>
<html>
  <head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>
    <meta name='description' content="One of the most exciting features in the newly released Angular 1.5 is the new .component() helper method (see Todd Motto&#39;s excellent, detailed write-up for a full walkthrough). It&#39;s now considered best practice to use controllerAs - a best practice which .component() enofrces. If you don&#39;t provide a value for controllerAs it will default to $ctrl.">
    <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@alexpeattie" /> <meta name="twitter:title" content="Quick tip: Set the default controllerAs to vm for .component() in Angular 1.5+" /> <meta name="twitter:description" content="One of the most exciting features in the newly released Angular 1.5 is the new .component() helper method..." /> <meta name="twitter:image" content="https://alexpeattie.com/assets/images/posts/setting-the-default-controlleras-to-vm-for-component-angular-1-5/angular.png" />

    <title>Quick tip: Set the default controllerAs to vm for .component()   in Angular 1.5+ - Alex Peattie</title>

    <link href='//fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32-18545059.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192-62275dc0.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16-13aa2390.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab-b8c45f01.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#ff0000">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ff0000">

    <link href="/assets/css/all-a7a0038a.css" rel="stylesheet" />
    <script src="/assets/js/all-a1da6af5.js"></script>
  </head>

  <body class='blog blog_setting-the-default-controlleras-to-vm-for-component-angular-1-5 blog_setting-the-default-controlleras-to-vm-for-component-angular-1-5_index'>
    <header>
  <nav class='MainMenu'>
    <a href='/' class='Logo'>
      <span>emil</span>karlsson
    </a>

    <a class='NavBtn NavBtn--mobileOnly' data-toggle-modal-menu>Menu</a>

    <section class='MainMenu-links'>
      <a href='/' class='NavBtn' id='NavBtnAbout'>About Me</a>
      <a href='/projects' class='NavBtn' id='NavBtnProjects'>Projects</a>
    <!-- <a href='/talks' class='NavBtn' id='NavBtnTalks'>Talks</a> -->
    <!-- <a href='/blog' class='NavBtn' id='NavBtnBlog'>Blog</a> -->

      <a class='NavBtn NavBtn--close' data-toggle-modal-menu>âœ•</a>
    </nav>
  </nav>

  
</header>


    <main>
        <article class='ContentBody'>
    <h1>Quick tip: Set the default controllerAs to <code>vm</code> for <code>.component()</code>   in Angular 1.5+</h1>
    <h2 class='PostMeta'>
      <time datetime="2016-02-15" pubdate="true">15th February 2016</time> â€“ 
      <a href='#comments' data-disqus-url='http://alexpeattie.com/blog/setting-the-default-controlleras-to-vm-for-component-angular-1-5/'>comments</a>
    </h2>
    <p>One of the most exciting features in the newly released Angular 1.5 is the new <code>.component()</code> helper method (see Todd Motto's <a href="https://toddmotto.com/exploring-the-angular-1-5-component-method">excellent, detailed write-up</a> for a full walkthrough). It's now <a href="https://github.com/johnpapa/angular-styleguide#style-y030">considered best practice</a> to use <code>controllerAs</code> - a best practice which <code>.component()</code> enofrces. If you don't provide a value for <code>controllerAs</code> it will default to <code>$ctrl</code>.</p>

<p>Why <code>$ctrl</code>? You can see the original (well-reasoned) discussion <a href="https://github.com/angular/angular.js/issues/13664">on Github</a>. However, <a href="https://github.com/johnpapa/angular-styleguide#style-y032">John Papa recommends</a> using <code>vm</code> (short for view-model) and if you're like me, you'll find yourself doing this a lot:</p>

<div class="codehilite javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">'myCoolComponent'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">controllerAs</span><span class="p">:</span> <span class="s1">'vm'</span><span class="p">,</span>
  <span class="na">bindings</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">})</span>
</pre></td></tr></tbody></table>
</div>

<p>Luckily it's quite easy to override the <code>.component()</code> helper in your application, to default to something other than <code>$ctrl</code>. You'll want to do this at the point you're defining your application's module:</p>

<div class="codehilite javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngAnimate'</span><span class="p">,</span> <span class="s1">'ngTouch'</span><span class="p">]);</span>
</pre></td></tr></tbody></table>
</div>

<p>Becomes:</p>

<div class="codehilite javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngAnimate'</span><span class="p">,</span> <span class="s1">'ngTouch'</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">_component</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">component</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">component</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">_component</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span> <span class="na">controllerAs</span><span class="p">:</span> <span class="s1">'vm'</span> <span class="p">},</span> <span class="nx">options</span><span class="p">));</span>
<span class="p">};</span>
</pre></td></tr></tbody></table>
</div>

<p>Pretty straightforward - we save the original <code>.component()</code> helper method to a variable, then replace it with a modified method that call the original, but firsts calls <a href="https://docs.angularjs.org/api/ng/function/angular.extend"><code>angular.extend</code></a> on our <code>options</code> object to set our preferred <code>controllerAs</code> default.</p>

<p>This modified method will only apply to any components defined for our app's module - any 3rd party plugins shouldn't be affected. You can see a Plunkr demonstrating this <a href="https://plnkr.co/edit/nPjov0d4ktjKuoL8bvxJ?p=preview">here</a>.</p>

<p>If you found this helpful, or if you have a neater way to do this, let me know in the comments ðŸ˜Š.</p>

  </article>
  
  <article class='Comments'>
  <h2 id='comments'>Comments</h2>

  <div id='disqus_thread'>
  </div>

  <script>
    var disqus_shortname = 'alexpeattie';
    var disqus_url = 'http://alexpeattie.com/blog/setting-the-default-controlleras-to-vm-for-component-angular-1-5/';
    var disqus_identifier = '2016 02 15 setting the default controlleras to vm for component angular 1 5';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      var s = document.createElement('script'); s.async = true; s.type = 'text/javascript';
      s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq).appendChild(s);
    })();
  </script>
</article>

    </main>

    <section class='SourceCallout'>
    <!--  <p>This site is open-source (<a href='/projects#site'>more info</a>) - here's <a href="https://github.com/alexpeattie/alexpeattie.com/blob/master/source/blog/2016-02-15-setting-the-default-controlleras-to-vm-for-component-angular-1-5.html.md">the source code for this page</a></a>.</p>-->
    </section>

    <footer>
      <p>Â© 2018 Emil Karlsson. Questions? Email <a href='mailto:me@emilingemarkarlsson@gmail.com'>emilingemarkarlsson@gmail.com</a>
      </p>
    </footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-116235734-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
